!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Shubox=t():e.Shubox=t()}(window,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function n(e,t,o){var s,r=t||new window.FormData;for(var i in e)e.hasOwnProperty(i)&&(s=o?o+"["+i+"]":i,"object"!=typeof e[i]||e[i]instanceof window.File?r.append(s,e[i]):n(e[i],r,i));return r}function s(e,t){if(!e.name){var o=t||new Date,n=o.getDate(),s=n<10?"0"+n:String(n),r=o.getMonth()+1,i=r<10?"0"+r:String(r),a=o.getFullYear(),u=o.getHours(),p=o.getMinutes(),c=p<10?"0"+p:String(p),l=o.getSeconds(),d=s+"."+i+"."+a+"-"+u+"."+c+"."+(l<10?"0"+l:String(l));e.name="paste-"+d+".jpg"}return e.name}o.r(t);var r=function(){function e(){}return e.prototype.accept=function(e,t){fetch("http://localhost:4101/signatures",{method:"post",mode:"cors",body:n({file:{upload_name:this.element.dataset.shuboxTransform||"",name:s(e),type:e.type,size:e.size},uuid:"UUID"})}).then(function(e){return e.json()}).then(function(o){o.error_message?(console.log(o.error_message),t("Error preparing the upload: "+o.error_message)):(e.postData=o,e.s3=o.key,t())}).catch(function(e){console.log("There was a problem with your request: "+e.message)})},e.prototype.sending=function(e,t,o){this.element.classList.add("shubox-uploading"),Object.keys(e.postData).forEach(function(t){var n=e.postData[t];o.append(t,n)})},e.prototype.success=function(e,t){this.element.classList.add("shubox-success"),this.element.classList.remove("shubox-uploading");var o=(/\<Location\>(.*)\<\/Location\>/g.exec(t)||["",""])[1];e.s3url=o.replace(/%2F/g,"/"),function(e,t){fetch("https://localhost:4101/uploads",{method:"post",mode:"cors",body:n({extraParams:t,bucket:"localhost-4100",uploaded:{width:e.width,height:e.height,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:s(e),s3Path:e.s3,s3Url:e.s3url,size:e.size,type:e.type}})}).catch(function(e){console.log("There was a problem with your request:"+e.message)})}(e,{}),window.Dropzone.prototype.defaultOptions.success(e),this.options.success&&this.options.success(e)},e.prototype.error=function(e,t){this.element.classList.remove("shubox-uploading"),this.element.classList.add("shubox-error"),window.Dropzone.prototype.defaultOptions.error(e,t),this.options.error&&this.options.error(e,t)},e.prototype.uploadProgress=function(e,t,o){this.element.dataset.shuboxProgress=String(t),window.Dropzone.prototype.defaultOptions.uploadprogress(e,t,o)},e.prototype.totalUploadProgress=function(e,t,o){this.element.dataset.shuboxTotalProgress=String(e),window.Dropzone.prototype.defaultOptions.totaluploadprogress(e,t,o)},e}(),i=function(){function e(){this.options={},this.formOptions={previewsContainer:!1},this.callbacks=new r}return e.instances=[],e}();o.d(t,"Shubox",function(){return i})}])});