!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Shubox=e():t.Shubox=e()}(window,function(){return function(t){var e={};function o(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";function s(t,e,o){var n,r=e||new window.FormData;for(var i in t)t.hasOwnProperty(i)&&(n=o?o+"["+i+"]":i,"object"!=typeof t[i]||t[i]instanceof window.File?r.append(n,t[i]):s(t[i],r,i));return r}function n(t,e){if(!t.name){var o=e||new Date,s=o.getDate(),n=s<10?"0"+s:String(s),r=o.getMonth()+1,i=r<10?"0"+r:String(r),a=o.getFullYear(),u=o.getHours(),p=o.getMinutes(),c=p<10?"0"+p:String(p),l=o.getSeconds(),d=n+"."+i+"."+a+"-"+u+"."+c+"."+(l<10?"0"+l:String(l));t.name="paste-"+d+".jpg"}return t.name}o.r(e);var r=function(){function t(){}return t.prototype.accept=function(t,e){fetch("http://localhost:4101/signatures",{method:"post",mode:"cors",body:s({file:{upload_name:this.element.dataset.shuboxTransform||"",name:n(t),type:t.type,size:t.size},uuid:"UUID"})}).then(function(t){return t.json()}).then(function(o){o.error_message?(console.log(o.error_message),e("Error preparing the upload: "+o.error_message)):(t.postData=o,t.s3=o.key,e())}).catch(function(t){console.log("There was a problem with your request: "+t.message)})},t.prototype.sending=function(t,e,o){this.element.classList.add("shubox-uploading"),Object.keys(t.postData).forEach(function(e){var s=t.postData[e];o.append(e,s)})},t.prototype.success=function(t,e){this.element.classList.add("shubox-success"),this.element.classList.remove("shubox-uploading");var o=(/\<Location\>(.*)\<\/Location\>/g.exec(e)||["",""])[1];t.s3url=o.replace(/%2F/g,"/"),function(t,e){fetch("https://localhost:4101/uploads",{method:"post",mode:"cors",body:s({extraParams:e,bucket:"localhost-4100",uploaded:{width:t.width,height:t.height,lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:n(t),s3Path:t.s3,s3Url:t.s3url,size:t.size,type:t.type}})}).catch(function(t){console.log("There was a problem with your request:"+t.message)})}(t,{}),window.Dropzone.prototype.defaultOptions.success(t),this.options.success&&this.options.success(t)},t.prototype.error=function(t,e){this.element.classList.remove("shubox-uploading"),this.element.classList.add("shubox-error"),window.Dropzone.prototype.defaultOptions.error(t,e),this.options.error&&this.options.error(t,e)},t.prototype.uploadProgress=function(t,e,o){this.element.dataset.shuboxProgress=String(e),window.Dropzone.prototype.defaultOptions.uploadprogress(t,e,o)},t.prototype.totalUploadProgress=function(t,e,o){this.element.dataset.shuboxTotalProgress=String(t),window.Dropzone.prototype.defaultOptions.totaluploadprogress(t,e,o)},t}(),i=function(){function t(){this.signatureUrl="https://api.shubox.io/signatures",this.uploadUrl="https://api.shubox.io/uploads",this.options={},this.formOptions={previewsContainer:!1},this.callbacks=new r}return t.instances=[],t}();o.d(e,"Shubox",function(){return i})}])});